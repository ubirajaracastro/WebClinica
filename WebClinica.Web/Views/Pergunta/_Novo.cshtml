@model WebClinica.Web.Models.PerguntaAnamneseViewModel

<div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
        @{ Html.EnableClientValidation(); }
        @using (Html.BeginForm(new { id = "frmPergunta" }))
        {

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">×</span><span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title">Nova Pergunta</h4>
            </div>

            @Html.AntiForgeryToken()

            <center>
                <div class="modal-body">
                    <div class="form-horizontal">
                        @Html.ValidationSummary(true, "Ocorreu um erro no preenchimento.")
                        <div class="form-group">
                            @Html.LabelFor(model => model.Descricao, htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-9">
                                @Html.EditorFor(model => model.Descricao, new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.Descricao, "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(model => model.TipoPergunta, htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.DropDownListFor(model => model.TipoPergunta, (SelectList)ViewBag.TipoPergunta, "Selecione")
                                @Html.ValidationMessageFor(model => model.TipoPergunta, "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div id="divAlternativas" style="display:none">
                            <h4>Alternativas:</h4>
                            <hr />
                            <div id="resultado" class="form-horizontal">
                                <table id="tabelaDados" class="table table-condensed table-hover table-striped">
                                    <tbody>
                                        <tr>

                                            <th>Descrição da Alternativa</th>
                                            <th>Ação</th>
                                        </tr>
                                        <tr>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                        </tr>
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <td colspan="5" style="text-align: left;">
                                                <button class="btn btn-primary" onclick="adicionarColuna()" type="button">Adicionar alternativa</button>
                                            </td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>

                        <br /><br />
                    </div>

                    <div id="myModal" class="modal fade" data-backdrop="static">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                    <h4 class="modal-title">Web Clínica</h4>
                                </div>
                                <div class="modal-body">
                                    <div id="divMsg"></div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
                                </div>
                            </div>
                        </div>
                    </div>



                </div>
                <div class="modal-footer">
                    <input type="button" id="btSalvar" value="Salvar" class="btn btn-primary" />
                    <input type="button" id="btFechar" value="Fechar" data-dismiss="modal" class="btn btn-default" />
                </div>
            </center>



        }
    </div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->


<script>

    $(document).ready(function () {
        mostrarDivdeAlternativas();

        $("#btSalvar").click(function () {
            SalvarPergunta();
        });

        $("#btFechar").click(function () {
            closeModal();
        });

        $(".close").click(function () {
            closeModal();
        });

        $('.nav-tabs a[href="#pergunta"]').tab('show')

    });

    function closeModal() {
        $('#modal').hide();

    }

    function OnSuccessPergunta(response) {
        $('#modal').hide();
        location.href = "@Url.Action("Novo", "ModeloAnamnese")"

    }


    
</script>


